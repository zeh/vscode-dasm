# Dasm macro assembler for VSCode

This is a dasm macro assembler [extension for Visual Studio Code](https://marketplace.visualstudio.com/items?itemName=zehfernando.vscode-dasm). It aims to provide the following in-editor features:

* Powerful assembly source editing for the 6502 (and others) using the [dasm macro assembler](http://dasm-dillon.sourceforge.net/)
* Assembling and exporting generated byte code (ROMs)
* Running Atari VCS 2600 code with full debugging and run-as-you-type abilities

**Notice, however, that this extension is a work-in-progress and that many features do not work yet.** More importantly, it doesn't yet create a separate ROM file nor does it open the emulator preview tab. You would need to rely on the command-line dasm and the Stella emulator (or others) for that.

See more about the motivation for this extension in the [Why Atari?](/client/WHY.md) document.

## Features

So far, the following features are supported:

### Basic syntax highlighting

![Syntax highlighting](/client/images/syntax-highlight.png)

### Basic hover support for more information

![Errors](/client/images/hover.png)

### Real error checking as you type

![Errors](/client/images/errors-symbols.png)

### Navigate to/peek at definitions for labels and symbols

## TODO

The current task list, more or less in order of priority, is:

* Manage multi-file projects
  * Resolve the include files problem
* Language definition
  * Add parameters to instructions and pseudo-ops descriptions
  * Add register list
* More syntax highlight: symbol, labels
  * Differentiate between values (#$99) and addresses ($99)
* More hover support
  * Show line where the hover is defined
  * Show comments from the same line (or before)
  * Show with colored support
  * Show whether it's referenced or not (or use as warnings?)
  * Don't show when hovering the same line as it's defined
  * Don't return error when not found (undefined?)
  * Identify values - e.g.  #$99 is value $99, $3E32 is memory location
  * Add more complex pseudo-ops descriptions
  * Use parameters in the description
* More navigation to definition support
  * Clean up provider file
  * Add definition support for multiple files
* Find usages
* Support incremental document sync
* Auto completion
  * Add all registers, instructions
  * Add symbols
  * Add labels
  * Parameter hints https://code.visualstudio.com/docs/editor/editingevolved#_parameter-hints
* Auto-format
  * Linting? "dasmlint"
  * Format-as-you-type
* Source code snippets
* Smart bracket matching
* Play compiled game on new tab
* Debugger support
  * Play/pause
  * Step in/out/etc
  * Hot reload (continue on same address)
  * Register/address monitoring
* Use [6502.ts](https://github.com/6502ts/6502.ts) instead of Javatari? Might not work at all (needs TIA, etc)

<!--
## Extension Settings

Include if your extension adds any VS Code settings through the `contributes.configuration` extension point.

For example:

This extension contributes the following settings:

* `myExtension.enable`: enable/disable this extension
* `myExtension.thing`: set to `blah` to do something
-->

## Release Notes

Check the [changelog](/client/CHANGELOG.md) for a list of all released versions and their notes.

## Contributing

Bug reports, fixes, and other changes are welcomed. Our repository is [on GitHub](https://github.com/zeh/vscode-dasm).

## Acknowledgements

This extension uses the original [dasm macro assembler](http://dasm-dillon.sourceforge.net/) via [dasmjs](https://github.com/zeh/dasmjs), an [emscripten](https://github.com/kripken/emscripten)-compiled version of the original C code. This is ran on the background, as a language server tracked as [a separate repository](https://github.com/zeh/vscode-dasm-server).

It also uses [Javatari](https://github.com/ppeccin/javatari.js) to preview Atari-compatible ROMs.

And finally, this extension was heavily inspired by the [8bitworkshop](http://8bitworkshop.com/?platform=vcs&file=examples%2Fhello) web-based Atari development IDE (but shares no code with it except for its reliance on Javatari). One could say this extension is an attempt to create a similar Atari development experience, but within a dedicated standalone desktop application. [Buy their book](https://www.amazon.com/gp/product/1541021304/ref=as_li_qf_sp_asin_il_tl?ie=UTF8&tag=pzp-20&camp=1789&creative=9325&linkCode=as2&creativeASIN=B01N4DSRIZ&linkId=04d39e274c06e6c93b93d20a9a977111) to show your support.

## License

This follows dasm itself and uses the [GNU Public License v2.0](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html).
